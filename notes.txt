в потоке реадера создаетс€ объект, в котором будут хранитьс€ результаты и мьютекс дл€ его использовани€

каждому новому потоку-обработчику передаетс€ указатель на этот объект и на мьютекс. 

объект это массив, в который потоки добавл€ют свои результаты. они блокируют мьютекс, добавл€ют свой результат и разблокируют мьютекс.

так же паралелльно запускаетс€ потом writer, который тоже получает эти указатели. он посто€нно провер€ет длину размер объекта, если тот не ноль, он блокирует мьютекс и начинает запись


---- дл€ потока под каждую задачу ---

в реадере создаютс€ объекты сообщений под каждый из потоков-задач, в них отправл€ютс€ ссылки на них и на объекты мьютексы
каждый из потоков бесконечно провер€ет, есть ли что-то в тех сообщени€х, если есть, он захватывает мьютекс и считывает сообщение, удал€€ его и отпускает мьютекс



что нам нужно? 
массив результатов и мьютекс доступа к нему
3 массива под 3 вида сообщений и соотвествтенно 3 мьютекса дл€ доступа к ним
массив потоков дл€ пула

1) per_thread 
 - передаем туда массив результатов и мьютекс к нему
 - передаем туда сообщение

2) per_task
 - передаем туда массив результатов и мьютекс к нему
 - передаем туда массив сообщений определенного типа и мьютекс к нему

3) thread_pool
 - передаем туда массив результатов и мьютекс к нему
 - передаем туда массив сообщений, мьютекс к нему

все потоки посто€нно провер€ют, есть ли новое сообщение, и если есть лочат массив и берут от туда сообщение
